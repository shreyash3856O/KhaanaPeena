<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KhaanaPeena - Restaurant Menu</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        // Mock data
        const restaurants = [
            { id: '1', name: 'The Food Studio', cuisine: 'North Indian & Asian', description: 'A glass-walled dining room serving North Indian and Asian seafood platters, known for its good ambiance and food', image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400&h=300&fit=crop', rating: 4.3, delivery_time: '30-35 mins' },
            { id: '2', name: '180 Degrees', cuisine: 'International', description: 'Located at the Radisson Mumbai, this restaurant offers an international menu and is highly rated for a great experience', image: 'https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=400&h=300&fit=crop', rating: 4.5, delivery_time: '25-30 mins' },
            { id: '3', name: 'Sigree Global Grill', cuisine: 'Barbecue & Indian', description: 'Known for its barbecue and Indian cuisine, it receives praise for its amazing starters', image: 'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=300&fit=crop', rating: 4.4, delivery_time: '20-25 mins' },
            { id: '4', name: '1441 Pizzeria', cuisine: 'Italian', description: 'A popular choice for Italian and unique pizzas, offering a pleasant dining experience', image: 'https://images.unsplash.com/photo-1513104890138-7c749659a591?w=400&h=300&fit=crop', rating: 4.2, delivery_time: '15-20 mins' },
            { id: '5', name: 'Made in Punjab', cuisine: 'North Indian', description: 'Offers a taste of authentic North Indian cuisine, including butter chicken and lassi', image: 'https://images.unsplash.com/photo-1585937421612-70a008356fbe?w=400&h=300&fit=crop', rating: 4.6, delivery_time: '25-30 mins' },
            { id: '6', name: 'The Irish House Malad', cuisine: 'Pub Fare', description: 'A great spot for pub fare and drinks with a good atmosphere', image: 'https://images.unsplash.com/photo-1572116469696-31de0f17cc34?w=400&h=300&fit=crop', rating: 4.1, delivery_time: '20-25 mins' }
        ];

        const menuItems = [
            // The Food Studio
            { id: '1', restaurant_id: '1', name: 'Chicken Tikka Kebab', description: 'Tender chicken pieces marinated in spices and grilled to perfection', price: 280, image: 'https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=200&h=150&fit=crop', category: 'Starters', is_veg: false },
            { id: '2', restaurant_id: '1', name: 'Mud Pie', description: 'Rich chocolate dessert with a gooey center, served with vanilla ice cream', price: 220, image: 'https://images.unsplash.com/photo-1551024506-0bccd828d307?w=200&h=150&fit=crop', category: 'Desserts', is_veg: true },
            { id: '3', restaurant_id: '1', name: 'Seafood Platter', description: 'Assortment of fresh seafood including prawns, fish, and calamari', price: 450, image: 'https://images.unsplash.com/photo-1559847844-5315695dadae?w=200&h=150&fit=crop', category: 'Main Course', is_veg: false },
            // 180 Degrees
            { id: '4', restaurant_id: '2', name: 'Grilled Salmon', description: 'Fresh Atlantic salmon grilled with herbs and served with seasonal vegetables', price: 520, image: 'https://images.unsplash.com/photo-1467003909585-2f8a72700288?w=200&h=150&fit=crop', category: 'Main Course', is_veg: false },
            { id: '5', restaurant_id: '2', name: 'Caesar Salad', description: 'Crisp romaine lettuce with parmesan cheese, croutons, and Caesar dressing', price: 280, image: 'https://images.unsplash.com/photo-1546793665-c74683f339c1?w=200&h=150&fit=crop', category: 'Salads', is_veg: false },
            { id: '6', restaurant_id: '2', name: 'Beef Steak', description: 'Juicy beef steak cooked to perfection with garlic butter', price: 650, image: 'https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=200&h=150&fit=crop', category: 'Main Course', is_veg: false },
            // Sigree Global Grill
            { id: '7', restaurant_id: '3', name: 'Chicken Malai Tikka', description: 'Creamy and succulent chicken tikka marinated in yogurt and spices', price: 320, image: 'https://images.unsplash.com/photo-1599487488170-d11ec9c172f0?w=200&h=150&fit=crop', category: 'Starters', is_veg: false },
            { id: '8', restaurant_id: '3', name: 'Paneer Tikka', description: 'Cottage cheese cubes marinated and grilled with Indian spices', price: 280, image: 'https://images.unsplash.com/photo-1599487488170-d11ec9c172f0?w=200&h=150&fit=crop', category: 'Starters', is_veg: true },
            { id: '9', restaurant_id: '3', name: 'BBQ Chicken', description: 'Tender chicken pieces slow-cooked on barbecue with special marinade', price: 380, image: 'https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=200&h=150&fit=crop', category: 'Main Course', is_veg: false },
            // 1441 Pizzeria
            { id: '10', restaurant_id: '4', name: 'Margherita Pizza', description: 'Classic pizza with tomato sauce, mozzarella, and fresh basil', price: 320, image: 'https://images.unsplash.com/photo-1513104890138-7c749659a591?w=200&h=150&fit=crop', category: 'Pizza', is_veg: true },
            { id: '11', restaurant_id: '4', name: 'Pepperoni Pizza', description: 'Pizza topped with spicy pepperoni and extra cheese', price: 380, image: 'https://images.unsplash.com/photo-1628840042765-356cda07504e?w=200&h=150&fit=crop', category: 'Pizza', is_veg: false },
            { id: '12', restaurant_id: '4', name: 'Truffle Pasta', description: 'Creamy pasta with truffle oil and parmesan cheese', price: 420, image: 'https://images.unsplash.com/photo-1551892376-c73ba35588a7?w=200&h=150&fit=crop', category: 'Pasta', is_veg: true },
            // Made in Punjab
            { id: '13', restaurant_id: '5', name: 'Butter Chicken', description: 'Creamy and rich butter chicken curry with naan bread', price: 340, image: 'https://images.unsplash.com/photo-1585937421612-70a008356fbe?w=200&h=150&fit=crop', category: 'Main Course', is_veg: false },
            { id: '14', restaurant_id: '5', name: 'Paneer Butter Masala', description: 'Cottage cheese in rich tomato and butter gravy', price: 280, image: 'https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=200&h=150&fit=crop', category: 'Main Course', is_veg: true },
            { id: '15', restaurant_id: '5', name: 'Lassi', description: 'Traditional sweet yogurt drink, refreshing and creamy', price: 80, image: 'https://images.unsplash.com/photo-1553909489-cd47e9adb3cc?w=200&h=150&fit=crop', category: 'Beverages', is_veg: true },
            // The Irish House Malad
            { id: '16', restaurant_id: '6', name: 'Fish and Chips', description: 'Crispy battered fish with golden fries and tartar sauce', price: 360, image: 'https://images.unsplash.com/photo-1579208570378-8c970854bc23?w=200&h=150&fit=crop', category: 'Main Course', is_veg: false },
            { id: '17', restaurant_id: '6', name: 'Irish Stew', description: 'Traditional lamb stew with potatoes, carrots, and herbs', price: 320, image: 'https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=200&h=150&fit=crop', category: 'Main Course', is_veg: false },
            { id: '18', restaurant_id: '6', name: 'Guinness Beer', description: 'Classic Irish stout beer, served cold', price: 180, image: 'https://images.unsplash.com/photo-1572116469696-31de0f17cc34?w=200&h=150&fit=crop', category: 'Beverages', is_veg: true }
        ];

        // Utility functions
        const getUrlParam = (param) => {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        };

        const addToCart = (item) => {
            const cart = JSON.parse(localStorage.getItem('khaanapeena_cart') || '{"items":[],"restaurantId":null,"restaurantName":null}');

            // Check if from different restaurant
            if (cart.restaurantId && cart.restaurantId !== item.restaurant_id) {
                if (!confirm('Adding items from a different restaurant will clear your current cart. Continue?')) {
                    return;
                }
                cart.items = [];
                cart.restaurantId = item.restaurant_id;
                cart.restaurantName = restaurants.find(r => r.id === item.restaurant_id)?.name || 'Restaurant';
            }

            const existingIndex = cart.items.findIndex(i => i.id === item.id);
            if (existingIndex > -1) {
                cart.items[existingIndex].quantity += 1;
            } else {
                cart.items.push({ ...item, quantity: 1 });
            }

            localStorage.setItem('khaanapeena_cart', JSON.stringify(cart));
            // Refresh the page to update cart count
            window.location.reload();
        };

        const getCartItemCount = () => {
            const cart = JSON.parse(localStorage.getItem('khaanapeena_cart') || '{"items":[]}');
            return cart.items.reduce((total, item) => total + item.quantity, 0);
        };

        const getCart = () => JSON.parse(localStorage.getItem('khaanapeena_cart') || '{"items":[],"restaurantId":null,"restaurantName":null}');

        // Get restaurant from URL
        const restaurantId = getUrlParam('id');
        const restaurant = restaurants.find(r => r.id === restaurantId);

        if (!restaurant) {
            ReactDOM.render(
                <div className="min-h-screen bg-gray-50 flex items-center justify-center">
                    <div className="text-center">
                        <h1 className="text-2xl font-bold text-gray-900 mb-4">Restaurant Not Found</h1>
                        <a href="index.html" className="px-6 py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 transition-colors">
                            Back to Restaurants
                        </a>
                    </div>
                </div>,
                document.getElementById('root')
            );
        } else {
            const menuItemsForRestaurant = menuItems.filter(item => item.restaurant_id === restaurantId);
            const groupedItems = menuItemsForRestaurant.reduce((acc, item) => {
                const category = item.category || 'Other';
                if (!acc[category]) acc[category] = [];
                acc[category].push(item);
                return acc;
            }, {});

            const MenuItemCard = ({ item }) => (
                <div className="flex gap-4 p-4 bg-white rounded-2xl border border-gray-100 fade-in">
                    <div className="w-20 h-20 rounded-xl overflow-hidden shrink-0">
                        <img src={item.image} alt={item.name} className="w-full h-full object-cover" />
                    </div>
                    <div className="flex-1 min-w-0">
                        <div className="flex items-center gap-2 mb-1">
                            <span className={`w-4 h-4 border-2 rounded flex items-center justify-center ${item.is_veg ? 'border-green-600' : 'border-red-600'}`}>
                                <span className={`w-2 h-2 rounded-full ${item.is_veg ? 'bg-green-600' : 'bg-red-600'}`} />
                            </span>
                            <h4 className="font-semibold text-gray-900 truncate">{item.name}</h4>
                        </div>
                        <p className="text-lg font-bold text-gray-900 mb-2">â‚¹{item.price}</p>
                        <p className="text-sm text-gray-500 line-clamp-2">{item.description}</p>
                    </div>
                    <div className="flex flex-col items-end justify-between">
                        <button
                            onClick={() => addToCart(item)}
                            className="px-6 py-2 bg-orange-500 text-white rounded-xl hover:bg-orange-600 transition-colors font-semibold"
                        >
                            ADD
                        </button>
                    </div>
                </div>
            );

            ReactDOM.render(
                <div className="min-h-screen bg-gray-50 pb-32">
                    <header className="bg-white border-b border-gray-100 sticky top-0 z-40">
                        <div className="max-w-4xl mx-auto px-4 py-4">
                            <div className="flex items-center justify-between">
                                <a href="index.html" className="inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors">
                                    â† <span className="font-medium">Back to restaurants</span>
                                </a>
                                <a href="cart.html" className="relative inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors">
                                    <span className="font-medium">Cart</span>
                                    <span className="text-lg">ğŸ›’</span>
                                    {getCartItemCount() > 0 && (
                                        <span className="absolute -top-2 -right-2 bg-orange-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold">
                                            {getCartItemCount()}
                                        </span>
                                    )}
                                </a>
                            </div>
                        </div>
                    </header>

                    <div className="bg-white border-b border-gray-100">
                        <div className="max-w-4xl mx-auto px-4 py-6">
                            <div className="flex gap-4">
                                <div className="w-24 h-24 rounded-2xl overflow-hidden shrink-0">
                                    <img src={restaurant.image} alt={restaurant.name} className="w-full h-full object-cover" />
                                </div>
                                <div className="flex-1 min-w-0">
                                    <h1 className="text-2xl font-bold text-gray-900 mb-1">{restaurant.name}</h1>
                                    <p className="text-gray-500 mb-3">{restaurant.cuisine}</p>
                                    <div className="flex flex-wrap items-center gap-3 text-sm">
                                        <div className="flex items-center gap-1 px-2 py-1 bg-green-50 rounded-lg">
                                            â­ <span className="font-semibold text-green-700">{restaurant.rating}</span>
                                        </div>
                                        <div className="flex items-center gap-1 text-gray-500">
                                            ğŸ•’ <span>{restaurant.delivery_time}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="max-w-4xl mx-auto px-4 py-6">
                        {Object.entries(groupedItems).map(([category, items]) => (
                            <div key={category} className="mb-8">
                                <h2 className="text-lg font-bold text-gray-900 mb-4 flex items-center gap-2">
                                    {category}
                                    <span className="text-sm font-normal text-gray-400">({items.length})</span>
                                </h2>
                                <div className="space-y-3">
                                    {items.map((item) => (
                                        <MenuItemCard key={item.id} item={item} />
                                    ))}
                                </div>
                            </div>
                        ))}
                    </div>

                    {getCart().items.length > 0 && (
                        <div className="fixed bottom-6 left-4 right-4 md:left-auto md:right-6 md:w-96 z-50">
                            <a href="cart.html" className="w-full bg-orange-500 text-white rounded-2xl p-4 shadow-2xl shadow-orange-500/30 hover:bg-orange-600 transition-colors block text-center">
                                ğŸ›’ View Cart ({getCart().items.reduce((sum, item) => sum + item.quantity, 0)} items)
                            </a>
                        </div>
                    )}
                </div>,
                document.getElementById('root')
            );
        }
    </script>
</body>
</html>